<canvas id="chart" width="300" height="150"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // ... set up audio as before ...
  const ctx = document.getElementById('chart').getContext('2d');
  const chart = new Chart(ctx, {
    type: 'line',
    data: { labels: [], datasets: [{ label: 'dB', data: [], fill: false }] },
    options: { animation: false, scales: { y: { beginAtZero: true } } }
  });
  function update() {
    // compute db...
    const now = new Date().toLocaleTimeString();
    chart.data.labels.push(now);
    chart.data.datasets[0].data.push(db);
    if (chart.data.labels.length > 30) {
      chart.data.labels.shift();
      chart.data.datasets[0].data.shift();
    }
    chart.update();
    document.getElementById("out").innerText = `dB: ${db.toFixed(2)}`;
  }
  setInterval(update, 200);
</script>
